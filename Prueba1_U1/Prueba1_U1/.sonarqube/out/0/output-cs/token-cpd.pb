›
JC:\Users\luise\Desktop\Prueba1_U1\Prueba1_U1\Prueba1_U1\WeatherForecast.cs
	namespace 	

Prueba1_U1
 
{ 
public 

class 
WeatherForecast  
{ 
public 
DateOnly 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
TemperatureC 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
int		 
TemperatureF		 
=>		  "
$num		# %
+		& '
(		( )
int		) ,
)		, -
(		- .
TemperatureC		. :
/		; <
$num		= C
)		C D
;		D E
public 
string 
? 
Summary 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} Ï
BC:\Users\luise\Desktop\Prueba1_U1\Prueba1_U1\Prueba1_U1\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder		 
.		 
Services		 
.		 
AddSwaggerGen		 
(		 
)		  
;		  !
builder

 
.

 
Services

 
.

 
AddDbContext

 
<

 
AppDbContext

 *
>

* +
(

+ ,
options

, 3
=>

4 6
options 
. 
UseSqlServer 
( 
builder  
.  !
Configuration! .
.. /
GetConnectionString/ B
(B C
$strC V
)V W
)W X
)X Y
;Y Z
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app 
. 
UseAuthorization 
( 
) 
; 
app 
. 
MapControllers 
( 
) 
; 
app 
. 
Run 
( 
) 	
;	 
§
OC:\Users\luise\Desktop\Prueba1_U1\Prueba1_U1\Prueba1_U1\Models\Procedimiento.cs
public 
class 
Procedimiento 
{ 
public 

int 
Id 
{ 
get 
; 
set 
; 
} 
public 

string 
Descripcion 
{ 
get  #
;# $
set% (
;( )
}* +
public 

decimal 
Costo 
{ 
get 
; 
set  #
;# $
}% &
public 

int 
IdCita 
{ 
get 
; 
set  
;  !
}" #
public 

Cita 
Cita 
{ 
get 
; 
set 
;  
}! "
} É
JC:\Users\luise\Desktop\Prueba1_U1\Prueba1_U1\Prueba1_U1\Models\Paciente.cs
public 
class 
Paciente 
{ 
public 

int 
Id 
{ 
get 
; 
set 
; 
} 
public 

string 
Nombre 
{ 
get 
; 
set  #
;# $
}% &
public 

string 
Apellido 
{ 
get  
;  !
set" %
;% &
}' (
public 

string 
Email 
{ 
get 
; 
set "
;" #
}$ %
} Í
HC:\Users\luise\Desktop\Prueba1_U1\Prueba1_U1\Prueba1_U1\Models\Doctor.cs
public 
class 
Doctor 
{ 
public 

int 
Id 
{ 
get 
; 
set 
; 
} 
public 

string 
Nombre 
{ 
get 
; 
set  #
;# $
}% &
public 

string 
Especialidad 
{  
get! $
;$ %
set& )
;) *
}+ ,
} ì

FC:\Users\luise\Desktop\Prueba1_U1\Prueba1_U1\Prueba1_U1\Models\Cita.cs
public 
class 
Cita 
{ 
public 

int 
Id 
{ 
get 
; 
set 
; 
} 
public 

DateTime 
Fecha 
{ 
get 
;  
set! $
;$ %
}& '
public 

int 

PacienteId 
{ 
get 
;  
set! $
;$ %
}& '
public 

Paciente 
Paciente 
{ 
get "
;" #
set$ '
;' (
}) *
public 

int 
DoctorId 
{ 
get 
; 
set "
;" #
}$ %
public 

Doctor 
Doctor 
{ 
get 
; 
set  #
;# $
}% &
public		 

ICollection		 
<		 
Procedimiento		 $
>		$ %
Procedimientos		& 4
{		5 6
get		7 :
;		: ;
set		< ?
;		? @
}		A B
}

 Å
dC:\Users\luise\Desktop\Prueba1_U1\Prueba1_U1\Prueba1_U1\Migrations\20250116131036_InitialCreateV2.cs
	namespace 	

Prueba1_U1
 
. 

Migrations 
{ 
public 

partial 
class 
InitialCreateV2 (
:) *
	Migration+ 4
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} ÅZ
bC:\Users\luise\Desktop\Prueba1_U1\Prueba1_U1\Prueba1_U1\Migrations\20250116130645_InitialCreate.cs
	namespace 	

Prueba1_U1
 
. 

Migrations 
{ 
public		 

partial		 
class		 
InitialCreate		 &
:		' (
	Migration		) 2
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str  
,  !
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Nombre 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 G
,G H
nullableI Q
:Q R
falseS X
)X Y
,Y Z
Especialidad  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
type8 <
:< =
$str> M
,M N
nullableO W
:W X
falseY ^
)^ _
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 2
,2 3
x4 5
=>6 8
x9 :
.: ;
Id; =
)= >
;> ?
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str !
,! "
columns 
: 
table 
=> !
new" %
{ 
Id   
=   
table   
.   
Column   %
<  % &
int  & )
>  ) *
(  * +
type  + /
:  / 0
$str  1 6
,  6 7
nullable  8 @
:  @ A
false  B G
)  G H
.!! 

Annotation!! #
(!!# $
$str!!$ 8
,!!8 9
$str!!: @
)!!@ A
,!!A B
Nombre"" 
="" 
table"" "
.""" #
Column""# )
<"") *
string""* 0
>""0 1
(""1 2
type""2 6
:""6 7
$str""8 G
,""G H
nullable""I Q
:""Q R
false""S X
)""X Y
,""Y Z
Apellido## 
=## 
table## $
.##$ %
Column##% +
<##+ ,
string##, 2
>##2 3
(##3 4
type##4 8
:##8 9
$str##: I
,##I J
nullable##K S
:##S T
false##U Z
)##Z [
,##[ \
Email$$ 
=$$ 
table$$ !
.$$! "
Column$$" (
<$$( )
string$$) /
>$$/ 0
($$0 1
type$$1 5
:$$5 6
$str$$7 F
,$$F G
nullable$$H P
:$$P Q
false$$R W
)$$W X
}%% 
,%% 
constraints&& 
:&& 
table&& "
=>&&# %
{'' 
table(( 
.(( 

PrimaryKey(( $
((($ %
$str((% 3
,((3 4
x((5 6
=>((7 9
x((: ;
.((; <
Id((< >
)((> ?
;((? @
})) 
))) 
;)) 
migrationBuilder++ 
.++ 
CreateTable++ (
(++( )
name,, 
:,, 
$str,, 
,,, 
columns-- 
:-- 
table-- 
=>-- !
new--" %
{.. 
Id// 
=// 
table// 
.// 
Column// %
<//% &
int//& )
>//) *
(//* +
type//+ /
:/// 0
$str//1 6
,//6 7
nullable//8 @
://@ A
false//B G
)//G H
.00 

Annotation00 #
(00# $
$str00$ 8
,008 9
$str00: @
)00@ A
,00A B
Fecha11 
=11 
table11 !
.11! "
Column11" (
<11( )
DateTime11) 1
>111 2
(112 3
type113 7
:117 8
$str119 D
,11D E
nullable11F N
:11N O
false11P U
)11U V
,11V W

PacienteId22 
=22  
table22! &
.22& '
Column22' -
<22- .
int22. 1
>221 2
(222 3
type223 7
:227 8
$str229 >
,22> ?
nullable22@ H
:22H I
false22J O
)22O P
,22P Q
DoctorId33 
=33 
table33 $
.33$ %
Column33% +
<33+ ,
int33, /
>33/ 0
(330 1
type331 5
:335 6
$str337 <
,33< =
nullable33> F
:33F G
false33H M
)33M N
}44 
,44 
constraints55 
:55 
table55 "
=>55# %
{66 
table77 
.77 

PrimaryKey77 $
(77$ %
$str77% /
,77/ 0
x771 2
=>773 5
x776 7
.777 8
Id778 :
)77: ;
;77; <
table88 
.88 

ForeignKey88 $
(88$ %
name99 
:99 
$str99 :
,99: ;
column:: 
::: 
x::  !
=>::" $
x::% &
.::& '
DoctorId::' /
,::/ 0
principalTable;; &
:;;& '
$str;;( 2
,;;2 3
principalColumn<< '
:<<' (
$str<<) -
,<<- .
onDelete==  
:==  !
ReferentialAction==" 3
.==3 4
Cascade==4 ;
)==; <
;==< =
table>> 
.>> 

ForeignKey>> $
(>>$ %
name?? 
:?? 
$str?? =
,??= >
column@@ 
:@@ 
x@@  !
=>@@" $
x@@% &
.@@& '

PacienteId@@' 1
,@@1 2
principalTableAA &
:AA& '
$strAA( 3
,AA3 4
principalColumnBB '
:BB' (
$strBB) -
,BB- .
onDeleteCC  
:CC  !
ReferentialActionCC" 3
.CC3 4
CascadeCC4 ;
)CC; <
;CC< =
}DD 
)DD 
;DD 
migrationBuilderFF 
.FF 
CreateTableFF (
(FF( )
nameGG 
:GG 
$strGG &
,GG& '
columnsHH 
:HH 
tableHH 
=>HH !
newHH" %
{II 
IdJJ 
=JJ 
tableJJ 
.JJ 
ColumnJJ %
<JJ% &
intJJ& )
>JJ) *
(JJ* +
typeJJ+ /
:JJ/ 0
$strJJ1 6
,JJ6 7
nullableJJ8 @
:JJ@ A
falseJJB G
)JJG H
.KK 

AnnotationKK #
(KK# $
$strKK$ 8
,KK8 9
$strKK: @
)KK@ A
,KKA B
DescripcionLL 
=LL  !
tableLL" '
.LL' (
ColumnLL( .
<LL. /
stringLL/ 5
>LL5 6
(LL6 7
typeLL7 ;
:LL; <
$strLL= L
,LLL M
nullableLLN V
:LLV W
falseLLX ]
)LL] ^
,LL^ _
CostoMM 
=MM 
tableMM !
.MM! "
ColumnMM" (
<MM( )
decimalMM) 0
>MM0 1
(MM1 2
typeMM2 6
:MM6 7
$strMM8 G
,MMG H
nullableMMI Q
:MMQ R
falseMMS X
)MMX Y
,MMY Z
IdCitaNN 
=NN 
tableNN "
.NN" #
ColumnNN# )
<NN) *
intNN* -
>NN- .
(NN. /
typeNN/ 3
:NN3 4
$strNN5 :
,NN: ;
nullableNN< D
:NND E
falseNNF K
)NNK L
}OO 
,OO 
constraintsPP 
:PP 
tablePP "
=>PP# %
{QQ 
tableRR 
.RR 

PrimaryKeyRR $
(RR$ %
$strRR% 8
,RR8 9
xRR: ;
=>RR< >
xRR? @
.RR@ A
IdRRA C
)RRC D
;RRD E
tableSS 
.SS 

ForeignKeySS $
(SS$ %
nameTT 
:TT 
$strTT >
,TT> ?
columnUU 
:UU 
xUU  !
=>UU" $
xUU% &
.UU& '
IdCitaUU' -
,UU- .
principalTableVV &
:VV& '
$strVV( /
,VV/ 0
principalColumnWW '
:WW' (
$strWW) -
,WW- .
onDeleteXX  
:XX  !
ReferentialActionXX" 3
.XX3 4
CascadeXX4 ;
)XX; <
;XX< =
}YY 
)YY 
;YY 
migrationBuilder[[ 
.[[ 
CreateIndex[[ (
([[( )
name\\ 
:\\ 
$str\\ )
,\\) *
table]] 
:]] 
$str]] 
,]] 
column^^ 
:^^ 
$str^^ "
)^^" #
;^^# $
migrationBuilder`` 
.`` 
CreateIndex`` (
(``( )
nameaa 
:aa 
$straa +
,aa+ ,
tablebb 
:bb 
$strbb 
,bb 
columncc 
:cc 
$strcc $
)cc$ %
;cc% &
migrationBuilderee 
.ee 
CreateIndexee (
(ee( )
nameff 
:ff 
$strff 0
,ff0 1
tablegg 
:gg 
$strgg '
,gg' (
columnhh 
:hh 
$strhh  
)hh  !
;hh! "
}ii 	
	protectedll 
overridell 
voidll 
Downll  $
(ll$ %
MigrationBuilderll% 5
migrationBuilderll6 F
)llF G
{mm 	
migrationBuildernn 
.nn 
	DropTablenn &
(nn& '
nameoo 
:oo 
$stroo &
)oo& '
;oo' (
migrationBuilderqq 
.qq 
	DropTableqq &
(qq& '
namerr 
:rr 
$strrr 
)rr 
;rr 
migrationBuildertt 
.tt 
	DropTablett &
(tt& '
nameuu 
:uu 
$struu  
)uu  !
;uu! "
migrationBuilderww 
.ww 
	DropTableww &
(ww& '
namexx 
:xx 
$strxx !
)xx! "
;xx" #
}yy 	
}zz 
}{{ Ô
`C:\Users\luise\Desktop\Prueba1_U1\Prueba1_U1\Prueba1_U1\Controllers\WeatherForecastController.cs
	namespace 	

Prueba1_U1
 
. 
Controllers  
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class %
WeatherForecastController *
:+ ,
ControllerBase- ;
{ 
private		 
static		 
readonly		 
string		  &
[		& '
]		' (
	Summaries		) 2
=		3 4
new		5 8
[		8 9
]		9 :
{

 	
$str 
, 
$str !
,! "
$str# +
,+ ,
$str- 3
,3 4
$str5 ;
,; <
$str= C
,C D
$strE L
,L M
$strN S
,S T
$strU a
,a b
$strc n
} 	
;	 

private 
readonly 
ILogger  
<  !%
WeatherForecastController! :
>: ;
_logger< C
;C D
public %
WeatherForecastController (
(( )
ILogger) 0
<0 1%
WeatherForecastController1 J
>J K
loggerL R
)R S
{ 	
_logger 
= 
logger 
; 
} 	
[ 	
HttpGet	 
( 
Name 
= 
$str ,
), -
]- .
public 
IEnumerable 
< 
WeatherForecast *
>* +
Get, /
(/ 0
)0 1
{ 	
return 

Enumerable 
. 
Range #
(# $
$num$ %
,% &
$num' (
)( )
.) *
Select* 0
(0 1
index1 6
=>7 9
new: =
WeatherForecast> M
{ 
Date 
= 
DateOnly 
.  
FromDateTime  ,
(, -
DateTime- 5
.5 6
Now6 9
.9 :
AddDays: A
(A B
indexB G
)G H
)H I
,I J
TemperatureC 
= 
Random %
.% &
Shared& ,
., -
Next- 1
(1 2
-2 3
$num3 5
,5 6
$num7 9
)9 :
,: ;
Summary 
= 
	Summaries #
[# $
Random$ *
.* +
Shared+ 1
.1 2
Next2 6
(6 7
	Summaries7 @
.@ A
LengthA G
)G H
]H I
} 
) 
. 
ToArray 
( 
) 
; 
} 	
}   
}!! ”
LC:\Users\luise\Desktop\Prueba1_U1\Prueba1_U1\Prueba1_U1\Data\AppDbContext.cs
	namespace 	

Prueba1_U1
 
. 
Data 
{ 
public 

class 
AppDbContext 
: 
	DbContext  )
{ 
public 
AppDbContext 
( 
DbContextOptions ,
<, -
AppDbContext- 9
>9 :
options; B
)B C
:D E
baseF J
(J K
optionsK R
)R S
{T U
}V W
public

 
DbSet

 
<

 
Paciente

 
>

 
	Pacientes

 (
{

) *
get

+ .
;

. /
set

0 3
;

3 4
}

5 6
public 
DbSet 
< 
Doctor 
> 
Doctores %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DbSet 
< 
Cita 
> 
Citas  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
Procedimiento "
>" #
Procedimientos$ 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
Entity 
<  
Cita  $
>$ %
(% &
)& '
. 
HasMany 
( 
c 
=> 
c 
.  
Procedimientos  .
). /
. 
WithOne 
( 
p 
=> 
p 
.  
Cita  $
)$ %
. 
HasForeignKey 
( 
p  
=>! #
p$ %
.% &
IdCita& ,
), -
;- .
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
} 	
} 
} ù7
_C:\Users\luise\Desktop\Prueba1_U1\Prueba1_U1\Prueba1_U1\Controllers\ProcedimientosController.cs
	namespace 	

Prueba1_U1
 
. 
Controllers  
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 $
ProcedimientosController		 )
:		* +
ControllerBase		, :
{

 
private 
readonly 
AppDbContext %
_context& .
;. /
public $
ProcedimientosController '
(' (
AppDbContext( 4
context5 <
)< =
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Procedimiento3 @
>@ A
>A B
>B C
GetProcedimientosD U
(U V
)V W
{ 	
return 
await 
_context !
.! "
Procedimientos" 0
.0 1
ToListAsync1 <
(< =
)= >
;> ?
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Procedimiento' 4
>4 5
>5 6
GetProcedimiento7 G
(G H
intH K
idL N
)N O
{ 	
var 
procedimiento 
= 
await  %
_context& .
.. /
Procedimientos/ =
.= >
	FindAsync> G
(G H
idH J
)J K
;K L
if 
( 
procedimiento 
==  
null! %
)% &
{ 
return 
NotFound 
(  
)  !
;! "
}   
return"" 
procedimiento""  
;""  !
}## 	
[%% 	
HttpPost%%	 
]%% 
public&& 
async&& 
Task&& 
<&& 
ActionResult&& &
<&&& '
Procedimiento&&' 4
>&&4 5
>&&5 6
PostProcedimiento&&7 H
(&&H I
Procedimiento&&I V
procedimiento&&W d
)&&d e
{'' 	
var(( 
cita(( 
=(( 
await(( 
_context(( %
.((% &
Citas((& +
.((+ ,
	FindAsync((, 5
(((5 6
procedimiento((6 C
.((C D
IdCita((D J
)((J K
;((K L
if)) 
()) 
cita)) 
==)) 
null)) 
))) 
{** 
return++ 

BadRequest++ !
(++! "
$str++" ?
)++? @
;++@ A
},, 
_context.. 
... 
Procedimientos.. #
...# $
Add..$ '
(..' (
procedimiento..( 5
)..5 6
;..6 7
await// 
_context// 
.// 
SaveChangesAsync// +
(//+ ,
)//, -
;//- .
return11 
CreatedAtAction11 "
(11" #
$str11# 5
,115 6
new117 :
{11; <
id11= ?
=11@ A
procedimiento11B O
.11O P
Id11P R
}11S T
,11T U
procedimiento11V c
)11c d
;11d e
}22 	
[44 	
HttpPut44	 
(44 
$str44 
)44 
]44 
public55 
async55 
Task55 
<55 
IActionResult55 '
>55' (
PutProcedimiento55) 9
(559 :
int55: =
id55> @
,55@ A
Procedimiento55B O
procedimiento55P ]
)55] ^
{66 	
if77 
(77 
id77 
!=77 
procedimiento77 #
.77# $
Id77$ &
)77& '
{88 
return99 

BadRequest99 !
(99! "
)99" #
;99# $
}:: 
_context<< 
.<< 
Entry<< 
(<< 
procedimiento<< (
)<<( )
.<<) *
State<<* /
=<<0 1
EntityState<<2 =
.<<= >
Modified<<> F
;<<F G
try>> 
{?? 
await@@ 
_context@@ 
.@@ 
SaveChangesAsync@@ /
(@@/ 0
)@@0 1
;@@1 2
}AA 
catchBB 
(BB (
DbUpdateConcurrencyExceptionBB /
)BB/ 0
{CC 
ifDD 
(DD 
!DD 
ProcedimientoExistsDD (
(DD( )
idDD) +
)DD+ ,
)DD, -
{EE 
returnFF 
NotFoundFF #
(FF# $
)FF$ %
;FF% &
}GG 
elseHH 
{II 
throwJJ 
;JJ 
}KK 
}LL 
returnNN 
	NoContentNN 
(NN 
)NN 
;NN 
}OO 	
[QQ 	

HttpDeleteQQ	 
(QQ 
$strQQ 
)QQ 
]QQ 
publicRR 
asyncRR 
TaskRR 
<RR 
IActionResultRR '
>RR' (
DeleteProcedimientoRR) <
(RR< =
intRR= @
idRRA C
)RRC D
{SS 	
varTT 
procedimientoTT 
=TT 
awaitTT  %
_contextTT& .
.TT. /
ProcedimientosTT/ =
.TT= >
	FindAsyncTT> G
(TTG H
idTTH J
)TTJ K
;TTK L
ifUU 
(UU 
procedimientoUU 
==UU  
nullUU! %
)UU% &
{VV 
returnWW 
NotFoundWW 
(WW  
)WW  !
;WW! "
}XX 
_contextZZ 
.ZZ 
ProcedimientosZZ #
.ZZ# $
RemoveZZ$ *
(ZZ* +
procedimientoZZ+ 8
)ZZ8 9
;ZZ9 :
await[[ 
_context[[ 
.[[ 
SaveChangesAsync[[ +
([[+ ,
)[[, -
;[[- .
return]] 
	NoContent]] 
(]] 
)]] 
;]] 
}^^ 	
private`` 
bool`` 
ProcedimientoExists`` (
(``( )
int``) ,
id``- /
)``/ 0
{aa 	
returnbb 
_contextbb 
.bb 
Procedimientosbb *
.bb* +
Anybb+ .
(bb. /
ebb/ 0
=>bb1 3
ebb4 5
.bb5 6
Idbb6 8
==bb9 ;
idbb< >
)bb> ?
;bb? @
}cc 	
}dd 
}ee ˘1
YC:\Users\luise\Desktop\Prueba1_U1\Prueba1_U1\Prueba1_U1\Controllers\PacienteController.cs
	namespace 	

Prueba1_U1
 
. 
Controllers  
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
PacientesController		 $
:		% &
ControllerBase		' 5
{

 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
PacientesController "
(" #
AppDbContext# /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Paciente3 ;
>; <
>< =
>= >
GetPacientes? K
(K L
)L M
{ 	
return 
await 
_context !
.! "
	Pacientes" +
.+ ,
ToListAsync, 7
(7 8
)8 9
;9 :
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Paciente' /
>/ 0
>0 1
GetPaciente2 =
(= >
int> A
idB D
)D E
{ 	
var 
paciente 
= 
await  
_context! )
.) *
	Pacientes* 3
.3 4
	FindAsync4 =
(= >
id> @
)@ A
;A B
if 
( 
paciente 
== 
null  
)  !
{ 
return 
NotFound 
(  
)  !
;! "
}   
return"" 
paciente"" 
;"" 
}## 	
[%% 	
HttpPost%%	 
]%% 
public&& 
async&& 
Task&& 
<&& 
ActionResult&& &
<&&& '
Paciente&&' /
>&&/ 0
>&&0 1
PostPaciente&&2 >
(&&> ?
Paciente&&? G
paciente&&H P
)&&P Q
{'' 	
_context(( 
.(( 
	Pacientes(( 
.(( 
Add(( "
(((" #
paciente((# +
)((+ ,
;((, -
await)) 
_context)) 
.)) 
SaveChangesAsync)) +
())+ ,
))), -
;))- .
return++ 
CreatedAtAction++ "
(++" #
$str++# 0
,++0 1
new++2 5
{++6 7
id++8 :
=++; <
paciente++= E
.++E F
Id++F H
}++I J
,++J K
paciente++L T
)++T U
;++U V
},, 	
[.. 	
HttpPut..	 
(.. 
$str.. 
).. 
].. 
public// 
async// 
Task// 
<// 
IActionResult// '
>//' (
PutPaciente//) 4
(//4 5
int//5 8
id//9 ;
,//; <
Paciente//= E
paciente//F N
)//N O
{00 	
if11 
(11 
id11 
!=11 
paciente11 
.11 
Id11 !
)11! "
{22 
return33 

BadRequest33 !
(33! "
)33" #
;33# $
}44 
_context66 
.66 
Entry66 
(66 
paciente66 #
)66# $
.66$ %
State66% *
=66+ ,
EntityState66- 8
.668 9
Modified669 A
;66A B
try88 
{99 
await:: 
_context:: 
.:: 
SaveChangesAsync:: /
(::/ 0
)::0 1
;::1 2
};; 
catch<< 
(<< (
DbUpdateConcurrencyException<< /
)<</ 0
{== 
if>> 
(>> 
!>> 
PacienteExists>> #
(>># $
id>>$ &
)>>& '
)>>' (
{?? 
return@@ 
NotFound@@ #
(@@# $
)@@$ %
;@@% &
}AA 
elseBB 
{CC 
throwDD 
;DD 
}EE 
}FF 
returnHH 
	NoContentHH 
(HH 
)HH 
;HH 
}II 	
[KK 	

HttpDeleteKK	 
(KK 
$strKK 
)KK 
]KK 
publicLL 
asyncLL 
TaskLL 
<LL 
IActionResultLL '
>LL' (
DeletePacienteLL) 7
(LL7 8
intLL8 ;
idLL< >
)LL> ?
{MM 	
varNN 
pacienteNN 
=NN 
awaitNN  
_contextNN! )
.NN) *
	PacientesNN* 3
.NN3 4
	FindAsyncNN4 =
(NN= >
idNN> @
)NN@ A
;NNA B
ifOO 
(OO 
pacienteOO 
==OO 
nullOO  
)OO  !
{PP 
returnQQ 
NotFoundQQ 
(QQ  
)QQ  !
;QQ! "
}RR 
_contextTT 
.TT 
	PacientesTT 
.TT 
RemoveTT %
(TT% &
pacienteTT& .
)TT. /
;TT/ 0
awaitUU 
_contextUU 
.UU 
SaveChangesAsyncUU +
(UU+ ,
)UU, -
;UU- .
returnWW 
	NoContentWW 
(WW 
)WW 
;WW 
}XX 	
privateZZ 
boolZZ 
PacienteExistsZZ #
(ZZ# $
intZZ$ '
idZZ( *
)ZZ* +
{[[ 	
return\\ 
_context\\ 
.\\ 
	Pacientes\\ %
.\\% &
Any\\& )
(\\) *
e\\* +
=>\\, .
e\\/ 0
.\\0 1
Id\\1 3
==\\4 6
id\\7 9
)\\9 :
;\\: ;
}]] 	
}^^ 
}__ Ú0
VC:\Users\luise\Desktop\Prueba1_U1\Prueba1_U1\Prueba1_U1\Controllers\CitasController.cs
	namespace 	

Prueba1_U1
 
. 
Controllers  
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
CitasController		  
:		! "
ControllerBase		# 1
{

 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
CitasController 
( 
AppDbContext +
context, 3
)3 4
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Cita3 7
>7 8
>8 9
>9 :
GetCitas; C
(C D
)D E
{ 	
return 
await 
_context !
.! "
Citas" '
.' (
ToListAsync( 3
(3 4
)4 5
;5 6
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Cita' +
>+ ,
>, -
GetCita. 5
(5 6
int6 9
id: <
)< =
{ 	
var 
cita 
= 
await 
_context %
.% &
Citas& +
.+ ,
	FindAsync, 5
(5 6
id6 8
)8 9
;9 :
if 
( 
cita 
== 
null 
) 
{ 
return 
NotFound 
(  
)  !
;! "
}   
return"" 
cita"" 
;"" 
}## 	
[%% 	
HttpPost%%	 
]%% 
public&& 
async&& 
Task&& 
<&& 
ActionResult&& &
<&&& '
Cita&&' +
>&&+ ,
>&&, -
PostCita&&. 6
(&&6 7
Cita&&7 ;
cita&&< @
)&&@ A
{'' 	
_context(( 
.(( 
Citas(( 
.(( 
Add(( 
((( 
cita(( #
)((# $
;(($ %
await)) 
_context)) 
.)) 
SaveChangesAsync)) +
())+ ,
))), -
;))- .
return++ 
CreatedAtAction++ "
(++" #
$str++# ,
,++, -
new++. 1
{++2 3
id++4 6
=++7 8
cita++9 =
.++= >
Id++> @
}++A B
,++B C
cita++D H
)++H I
;++I J
},, 	
[.. 	
HttpPut..	 
(.. 
$str.. 
).. 
].. 
public// 
async// 
Task// 
<// 
IActionResult// '
>//' (
PutCita//) 0
(//0 1
int//1 4
id//5 7
,//7 8
Cita//9 =
cita//> B
)//B C
{00 	
if11 
(11 
id11 
!=11 
cita11 
.11 
Id11 
)11 
{22 
return33 

BadRequest33 !
(33! "
)33" #
;33# $
}44 
_context66 
.66 
Entry66 
(66 
cita66 
)66  
.66  !
State66! &
=66' (
EntityState66) 4
.664 5
Modified665 =
;66= >
try88 
{99 
await:: 
_context:: 
.:: 
SaveChangesAsync:: /
(::/ 0
)::0 1
;::1 2
};; 
catch<< 
(<< (
DbUpdateConcurrencyException<< /
)<</ 0
{== 
if>> 
(>> 
!>> 

CitaExists>> 
(>>  
id>>  "
)>>" #
)>># $
{?? 
return@@ 
NotFound@@ #
(@@# $
)@@$ %
;@@% &
}AA 
elseBB 
{CC 
throwDD 
;DD 
}EE 
}FF 
returnHH 
	NoContentHH 
(HH 
)HH 
;HH 
}II 	
[KK 	

HttpDeleteKK	 
(KK 
$strKK 
)KK 
]KK 
publicLL 
asyncLL 
TaskLL 
<LL 
IActionResultLL '
>LL' (

DeleteCitaLL) 3
(LL3 4
intLL4 7
idLL8 :
)LL: ;
{MM 	
varNN 
citaNN 
=NN 
awaitNN 
_contextNN %
.NN% &
CitasNN& +
.NN+ ,
	FindAsyncNN, 5
(NN5 6
idNN6 8
)NN8 9
;NN9 :
ifOO 
(OO 
citaOO 
==OO 
nullOO 
)OO 
{PP 
returnQQ 
NotFoundQQ 
(QQ  
)QQ  !
;QQ! "
}RR 
_contextTT 
.TT 
CitasTT 
.TT 
RemoveTT !
(TT! "
citaTT" &
)TT& '
;TT' (
awaitUU 
_contextUU 
.UU 
SaveChangesAsyncUU +
(UU+ ,
)UU, -
;UU- .
returnWW 
	NoContentWW 
(WW 
)WW 
;WW 
}XX 	
privateZZ 
boolZZ 

CitaExistsZZ 
(ZZ  
intZZ  #
idZZ$ &
)ZZ& '
{[[ 	
return\\ 
_context\\ 
.\\ 
Citas\\ !
.\\! "
Any\\" %
(\\% &
e\\& '
=>\\( *
e\\+ ,
.\\, -
Id\\- /
==\\0 2
id\\3 5
)\\5 6
;\\6 7
}]] 	
}^^ 
}__ ¿1
YC:\Users\luise\Desktop\Prueba1_U1\Prueba1_U1\Prueba1_U1\Controllers\DoctoresController.cs
	namespace 	

Prueba1_U1
 
. 
Controllers  
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
DoctoresController		 #
:		$ %
ControllerBase		& 4
{

 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
DoctoresController !
(! "
AppDbContext" .
context/ 6
)6 7
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Doctor3 9
>9 :
>: ;
>; <
GetDoctores= H
(H I
)I J
{ 	
return 
await 
_context !
.! "
Doctores" *
.* +
ToListAsync+ 6
(6 7
)7 8
;8 9
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Doctor' -
>- .
>. /
	GetDoctor0 9
(9 :
int: =
id> @
)@ A
{ 	
var 
doctor 
= 
await 
_context '
.' (
Doctores( 0
.0 1
	FindAsync1 :
(: ;
id; =
)= >
;> ?
if 
( 
doctor 
== 
null 
) 
{ 
return 
NotFound 
(  
)  !
;! "
}   
return"" 
doctor"" 
;"" 
}## 	
[%% 	
HttpPost%%	 
]%% 
public&& 
async&& 
Task&& 
<&& 
ActionResult&& &
<&&& '
Doctor&&' -
>&&- .
>&&. /

PostDoctor&&0 :
(&&: ;
Doctor&&; A
doctor&&B H
)&&H I
{'' 	
_context(( 
.(( 
Doctores(( 
.(( 
Add(( !
(((! "
doctor((" (
)((( )
;(() *
await)) 
_context)) 
.)) 
SaveChangesAsync)) +
())+ ,
))), -
;))- .
return++ 
CreatedAtAction++ "
(++" #
$str++# .
,++. /
new++0 3
{++4 5
id++6 8
=++9 :
doctor++; A
.++A B
Id++B D
}++E F
,++F G
doctor++H N
)++N O
;++O P
},, 	
[.. 	
HttpPut..	 
(.. 
$str.. 
).. 
].. 
public// 
async// 
Task// 
<// 
IActionResult// '
>//' (
	PutDoctor//) 2
(//2 3
int//3 6
id//7 9
,//9 :
Doctor//; A
doctor//B H
)//H I
{00 	
if11 
(11 
id11 
!=11 
doctor11 
.11 
Id11 
)11  
{22 
return33 

BadRequest33 !
(33! "
)33" #
;33# $
}44 
_context66 
.66 
Entry66 
(66 
doctor66 !
)66! "
.66" #
State66# (
=66) *
EntityState66+ 6
.666 7
Modified667 ?
;66? @
try88 
{99 
await:: 
_context:: 
.:: 
SaveChangesAsync:: /
(::/ 0
)::0 1
;::1 2
};; 
catch<< 
(<< (
DbUpdateConcurrencyException<< /
)<</ 0
{== 
if>> 
(>> 
!>> 
DoctorExists>> !
(>>! "
id>>" $
)>>$ %
)>>% &
{?? 
return@@ 
NotFound@@ #
(@@# $
)@@$ %
;@@% &
}AA 
elseBB 
{CC 
throwDD 
;DD 
}EE 
}FF 
returnHH 
	NoContentHH 
(HH 
)HH 
;HH 
}II 	
[KK 	

HttpDeleteKK	 
(KK 
$strKK 
)KK 
]KK 
publicLL 
asyncLL 
TaskLL 
<LL 
IActionResultLL '
>LL' (
DeleteDoctorLL) 5
(LL5 6
intLL6 9
idLL: <
)LL< =
{MM 	
varNN 
doctorNN 
=NN 
awaitNN 
_contextNN '
.NN' (
DoctoresNN( 0
.NN0 1
	FindAsyncNN1 :
(NN: ;
idNN; =
)NN= >
;NN> ?
ifOO 
(OO 
doctorOO 
==OO 
nullOO 
)OO 
{PP 
returnQQ 
NotFoundQQ 
(QQ  
)QQ  !
;QQ! "
}RR 
_contextTT 
.TT 
DoctoresTT 
.TT 
RemoveTT $
(TT$ %
doctorTT% +
)TT+ ,
;TT, -
awaitUU 
_contextUU 
.UU 
SaveChangesAsyncUU +
(UU+ ,
)UU, -
;UU- .
returnWW 
	NoContentWW 
(WW 
)WW 
;WW 
}XX 	
privateZZ 
boolZZ 
DoctorExistsZZ !
(ZZ! "
intZZ" %
idZZ& (
)ZZ( )
{[[ 	
return\\ 
_context\\ 
.\\ 
Doctores\\ $
.\\$ %
Any\\% (
(\\( )
e\\) *
=>\\+ -
e\\. /
.\\/ 0
Id\\0 2
==\\3 5
id\\6 8
)\\8 9
;\\9 :
}]] 	
}^^ 
}__ 